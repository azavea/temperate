<div class="icon-related-indicators tooltip-wrapper" *ngIf="risk.weatherEvent.indicators"
     tooltip="{{ relatedIndicatorsTooltip() }}">
  <button class="button button-primary button-small"
          [disabled]="!indicators?.length"
          (click)="indicatorsModal.open()">View related indicators</button>
</div>
<div class="step-header">
  <h3>Hazard</h3>
  <div *ngIf="risk.weatherEvent?.name">
    How will <em>{{ risk.weatherEvent.name }}</em> change over time?
  </div>
</div>
<div class="step-content">
  <form [formGroup]="form">
    <div class="step-form-control">
      <h5>Probability</h5>
      <app-option-dropdown [control]="form.controls['probability']"
                           [options]="relativeOptions">
      </app-option-dropdown>
    </div>
    <div class="step-form-control">
      <h5>Frequency <span class="icon icon-question-circle-o" tooltip="{{ tooltipText.frequency }}"></span></h5>
      <div class="btn-group">
        <button class="btn btn-primary"
                [ngClass]="{active: form.controls.frequency.value === opt}"
                *ngFor="let opt of directionalOptionsKeys"
                (click)="updateDirectionalControl(form.controls.frequency, opt)">
          {{ directionalOptions.get(opt)?.label }}
        </button>
      </div>
    </div>
    <div class="step-form-control">
      <h5>Intensity <span class="icon icon-question-circle-o" tooltip="{{ tooltipText.intensity }}"></span></h5>
      <div class="btn-group">
        <button class="btn btn-primary"
                [ngClass]="{active: form.controls.intensity.value === opt}"
                *ngFor="let opt of directionalOptionsKeys"
                (click)="updateDirectionalControl(form.controls.intensity, opt)">
          {{ directionalOptions.get(opt)?.label }}
        </button>
      </div>
    </div>
  </form>
</div>
<div class="step-footer">
  <button type="button"
          nextStep
          (finalize)="save()">Skip Step</button>
  <button type="button"
          nextStep
          [disabled]="form.invalid || !isStepComplete()"
          (finalize)="save()">Continue</button>
</div>


<app-modal-template #indicatorChartModal
    title="Viewing indicators related to {{ risk.weatherEvent.name }}">
  <app-collapsible-chart
      *ngFor="let indicator of indicators"
      [indicator]="indicator"
      [city]="city">
  </app-collapsible-chart>
</app-modal-template>
