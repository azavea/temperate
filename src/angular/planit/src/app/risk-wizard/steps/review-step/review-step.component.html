<p *ngIf="isDisabled" class="alert alert-warning">
  You must match a hazard to a community system to save this risk.
</p>
<div class="step-intro">
  <h3 class="step-header">Review</h3>
</div>
<div class="step-content">
	<section class="review-step">
    <div class="review-section-header-container">
			<h4 class="review-section-header">Identify risk</h4>
			<button class="button button-icon icon-edit" goToStep="0" title="Edit fields"></button>
		</div>
		<div class="review-item">
			<span class="answer-label">Hazard:</span> 
			{{ risk.weather_event?.name || "--" }}
		</div>
		<div class="review-item">
			<span class="answer-label">Community system:</span> 
			{{ risk.community_system?.name || "--" }}
		</div>
	</section>

	<section class="review-step">
    <div class="review-section-header-container">
			<h4 class="review-section-header">Hazard</h4>
			<button class="button button-icon icon-edit" goToStep="1" title="Edit fields"></button>
		</div>
		<div class="review-item">
			<span class="answer-label">Probability: </span>
			{{ chanceOptions.get(risk.probability)?.label || "--" }}
		</div>
		<div class="review-item">
			<span class="answer-label">Frequency: </span>
			{{ directionalOptions.get(risk.frequency)?.label || "--" }}
		</div>
		<div class="review-item">
			<span class="answer-label">Intensity: </span>
			{{ directionalOptions.get(risk.intensity)?.label || "--" }}
		</div>
	</section>

	<section class="review-step">
    <div class="review-section-header-container">
			<h4 class="review-section-header">Impact</h4>
			<button class="button button-icon icon-edit" goToStep="2" title="Edit fields"></button>
		</div>
		<div class="review-item">
			<span class="answer-label">Potential impact: </span>
			{{ impactOptions.get(risk.impact_magnitude)?.label || "--" }}
		</div>
		<div class="review-item">
			<span class="answer-label">Description: </span>
			<span class="review-description">{{ risk.impact_description || '--' }}</span>
		</div>
	</section>

	<section class="review-step">
    <div class="review-section-header-container">
			<h4 class="review-section-header">Adaptive capacity</h4>
			<button class="button button-icon icon-edit" goToStep="3" title="Edit fields"></button>
		</div>
		<div class="review-item">
			<span class="answer-label">Adaptive capacity: </span>
			{{ chanceOptions.get(risk.adaptive_capacity)?.label || "--" }}
		</div>
		<div class="review-item">
			<span class="answer-label">Description: </span>
			<span class="review-description">{{ risk.adaptive_capacity_description || "--" }}</span>
		</div>
		<div class="review-item">
			<span class="answer-label">Related adaptive values: </span>
			<span *ngIf="!risk.related_adaptive_values?.length">--</span>
			<div class="freeform-multiselect" *ngIf="risk.related_adaptive_values?.length > 0">
				<div class="selected-option" *ngFor="let relatedAdaptiveValue of risk.related_adaptive_values">
					{{ relatedAdaptiveValue }}
				</div>
			</div>
		</div>
	</section>
</div>

<footer class="step-footer">
	<div class="step-footer-exit">
		<button type="button" class="button" 
				*ngIf="!risk?.id" 
				(click)="cancel()">Cancel</button>
	</div>
  <div class="step-footer-navigation">
		<button type="button" class="button button-primary"  
				[disabled]="isDisabled" 
				(click)="finish()">Finish</button>
	</div>
</footer>
