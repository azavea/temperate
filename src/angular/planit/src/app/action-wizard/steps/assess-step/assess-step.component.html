<div class="step-header">
  <h3 id="action-title" class="step-title">Overview <span class="required">required</span></h3>
</div>

<div class="step-content">
  <form [formGroup]="form">
    <div class="form-control-container">
      <textarea class="form-control" formControlName="name" #actionName cols="70" rows="4" aria-labelledby="action-title" required></textarea>
      <div class="form-control-hint form-control-hint-right"
           [ngClass]="{'form-control-error': textMaxLength - actionName.value.length < 0}">
        {{ textMaxLength - actionName.value.length }} characters remaining
      </div>
      <div class="form-control-hint">Unsure of where to begin? <button class="button-link"
              [popover]="actionExamplesPopover"
              [outsideClick]="true"
              container="body"
              placement="right">
        See examples
      </button></div>
      <div class="form-control-error" *ngIf="form.controls.name.errors && (form.controls.name.dirty || form.controls.name.touched)">
        <span *ngIf="form.controls.name.errors.required">Please describe the action you intend to undertake.</span>
        <span *ngIf="form.controls.name.errors.server">*{{ form.controls.name.errors.server }}</span>
      </div>
    </div>
  </form>
</div>

<footer class="step-footer">
  <div class="step-footer-exit">
    <button type="button" class="button-link"
            *ngIf="!action?.name"
            (click)="cancel()">Cancel</button>
    <button type="button" class="button-link"
            *ngIf="!!action?.name"
            (click)="finish()">Finish action later</button>
  </div>
  <div class="step-footer-navigation">
    <button type="button" class="button button-primary"
            [disabled]="!form.valid"
            nextStep>Next</button>
  </div>
</footer>

<ng-template class="action-example-popover" #actionExamplesPopover>
  <h4 class="popover-title">Here are some action examples:</h4>
  <ul class="example-list">
    <li class="example-list-item">
      <h5 class="example-title">Keene, NH</h5>
      <p>
        Increase local food production by 20% within five years of establishing baseline
        of community food production.
      </p>
    </li>
    <li class="example-list-item">
      <h5 class="example-title">Albany, NY</h5>
      <p>
        Identify locations of vulnerable populations (those who live alone, seniors, low
        income areas, others at-risk, etc.) and provide each home with a window card to indicate if help is needed.
      </p>
    </li>
    <li class="example-list-item">
      <h5 class="example-title">Baltimore, MD</h5>
      <p>
        Encourage use of permeable pavement in non-critical areas â€“ low-use roadways,
        sidewalks, parking lots and alleys where soils permit proper drainage.
      </p>
    </li>
    <li class="example-list-item">
      <h5 class="example-title">Denver, CO</h5>
      <p>
        Identify opportunities for the city to become a subscriber in community solar gardens.
      </p>
    </li>
  </ul>
</ng-template>
