<div class="main-container">
  <main class="main-content" role="main">
    <header class="page-header" *ngIf="weatherEvent?.name">
      <h1 class="page-title-small">Vulnerability Assessment</h1>
      <h2 class="page-title-large">{{ weatherEvent?.name }}</h2>
      <p class="paragraph-intro">
        Based on your chosen top hazards and community systems, we have identified some risks as
        a high priority to include in your vulnerability assessment. 
      </p>
      <p>Click on a row to assess each risk or
          <button class="button-link"
                  [popover]="learnMoreRiskPopover"
                  [outsideClick]="true"
                  container="body"
                  placement="right"
                  triggers="click">learn how we identify high-priority risks.</button>
      </p>
    </header>
    <section>
      <va-assessment-overview-table [(risks)]="risks"></va-assessment-overview-table>
      <button class="button" routerLink="risk/new">Add new risk</button>
      <button class="button button-positive"
              *ngIf="risks?.length && getAssessedRisks().length >= 1"
              [routerLink]="['/actions']"
              [queryParams]="{hazard: weatherEvent?.id}">
        Take action
      </button>
    </section>
  </main>
</div>

<ng-template #learnMoreRiskPopover>
  <div>
    These potential risks were selected based on the geographic regions used by the
    <a href="https://data.globalchange.gov/file/ca9c6f09-9890-41db-ace4-827f9cbeb93a" target="_blank">National Climate Assessment</a>
    and the potential future climate hazards that are most likely to exist.
    For more on this, visit our <a routerLink="/methodology">Methodology</a> page.
  </div>
</ng-template>
