<ng-template #popoverTemplate>
  <div class="row">
    <div class="va-popover-description col-5">
      <p class="va-popover-title">How is <strong>adaptive need</strong> calculated?</p>
      <p>
      Here explain what "adaptive need" is and how we are calculating this.
      </p>
    </div>
    <div class="adaptive-need-table col-6">
      <table cellpadding="2">
        <thead>
          <tr>
            <th colspan="3">Adaptive Capacity</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let potentialImpactIndex of [2, 1, 0]"
            [ngClass]="'pi-' + potentialImpactIndex">
            <td *ngFor="let adaptiveCapacityIndex of [2, 1, 0]"
              class="adaptive-capacity-box"
              [ngClass]="{'selected': potentialImpactIndex == potentialImpactBin
                && adaptiveCapacityIndex == adaptiveCapacityBin,
                'ac-0': adaptiveCapacityIndex == 0,
                'ac-1': adaptiveCapacityIndex == 1,
                'ac-2': adaptiveCapacityIndex == 2}">
              &nbsp;
            </td>
            <th>{{ ['Low', 'Mod', 'High'][potentialImpactIndex] }}</th>
          </tr>
          <span class="chart-left">Potential Impact</span>
          <tr>
            <th>High</th>
            <th>Mod</th>
            <th>Low</th>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</ng-template>

<span [ngClass]="['adaptive-need-box', 'pi-' + potentialImpactBin, 'ac-' + adaptiveCapacityBin]"
      [popover]="popoverTemplate" placement="right" container="body"
                containerClass="va-popover container-fluid" triggers="mouseenter:mouseleave"
      *ngIf="(potentialImpactBin !== undefined &&
             adaptiveCapacityBin !== undefined)">&nbsp;</span>
<span *ngIf="potentialImpactBin === undefined || adaptiveCapacityBin === undefined">--</span>
