<div class="step-header">
  <h2 class="step-title">Create your organization</h2>
</div>

<div class="step-content" [formGroup]="form">
  <div class="form-control-container">
    <label>City</label>
      <input class="form-control"
             formControlName="location"
             typeaheadOptionField="properties.displayName"
             (typeaheadOnSelect)="itemSelected($event)"
             (typeaheadOnBlur)="itemBlurred()"
             (typeaheadNoResults)="onNoResults()"
             (blur)="itemBlurred()"
             (keyup)="onKey($event)"
             [typeahead]="cities"
             [typeaheadMinLength]="1"
             [typeaheadScrollable]="true"
             [typeaheadWaitMs]="100"
             [typeaheadOptionsInScrollableView]="5">
      <div class="form-control-hint">
        <app-add-city-modal></app-add-city-modal>
      </div>
      <div class="form-control-error" *ngIf="form.controls.location.errors && (form.controls.location.dirty || form.controls.location.touched)">
        <span *ngIf="noResults">No results found</span>
        <span *ngIf="form.controls.location.errors.required || form.controls.location.errors.autocomplete">This is a required field.</span>
        <span *ngIf="form.controls.location.errors.server">
          *{{ form.controls.location.errors.server }}
        </span>
      </div>
  </div>
  <div class="form-control-container">
    <label>Organization/department</label>
      <input class="form-control"
             formControlName="name"
             type="text">
      <div class="form-control-hint">e.g. Ecology Action Center. If you work from more than one department, just pick one.</div>
      <div class="form-control-error" *ngIf="form.controls.location.errors && (form.controls.location.dirty || form.controls.location.touched)">
        <span *ngIf="form.controls.name.errors.required">This is a required field.</span>
        <span *ngIf="form.controls.name.errors.server">
          *{{ form.controls.name.errors.server }}
        </span>
      </div>
  </div>
</div>

<div class="step-footer">
  <div class="step-footer-navigation">
    <button type="button" class="button button-primary"
            [disabled]="!form.valid"
            nextStep
            (click)="store()">Next</button>
  </div>
</div>
