<div class="step-header">
  <h2 class="step-title">Create your organization</h2>
</div>

<div class="step-content" [formGroup]="form">
  <div class="form-control-container">
    <label>City <span class="required">(Required)</span></label>
      <button type="button" class="button-link pull-right form-help-button" href="javascript:"
              tooltip="Temperate is customized to your city. We need this information in order to create an organization for you and your team.">
        Why do I need to provide a city?
      </button>
      <input class="form-control"
             formControlName="location"
             typeaheadOptionField="properties.displayName"
             (typeaheadOnSelect)="itemSelected($event)"
             (typeaheadOnBlur)="itemBlurred()"
             (typeaheadNoResults)="onNoResults()"
             (blur)="itemBlurred()"
             (keyup)="onKey($event)"
             [typeahead]="cities"
             [typeaheadMinLength]="1"
             [typeaheadScrollable]="true"
             [typeaheadWaitMs]="100"
             [typeaheadOptionsInScrollableView]="5">
      <div class="form-control-hint">Please note that we only have US cities at this time.</div>
      <div class="form-control-error" *ngIf="form.controls.location.errors && (form.controls.location.dirty || form.controls.location.touched)">
        <span *ngIf="noResults">No results found</span>
        <span *ngIf="form.controls.location.errors.required || form.controls.location.errors.autocomplete">This is a required field.</span>
        <span *ngIf="form.controls.location.errors.server">
          *{{ form.controls.location.errors.server }}
        </span>
      </div>
  </div>
  <div class="form-control-container">
    <label>Organization/department <span class="required">(Required)</span></label>
      <input class="form-control"
             formControlName="name"
             type="text">
      <div class="form-control-hint">e.g. Ecology Action Center. If you work from more than one department, just pick one.</div>
      <div class="form-control-error" *ngIf="form.controls.location.errors && (form.controls.location.dirty || form.controls.location.touched)">
        <span *ngIf="form.controls.name.errors.required">This is a required field.</span>
        <span *ngIf="form.controls.name.errors.server">
          *{{ form.controls.name.errors.server }}
        </span>
      </div>
  </div>
</div>

<div class="step-footer">
  <div class="step-footer-navigation">
    <button type="button" class="button button-primary"
            [disabled]="!form.valid"
            nextStep
            (click)="store()">Next</button>
  </div>
</div>
