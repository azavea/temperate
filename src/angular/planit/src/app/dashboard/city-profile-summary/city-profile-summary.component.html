<div class="aside-block">
  <!-- All complete -->
  <div class="aside-content all-complete" *ngIf="isDone(required) && isDone(overall)">
    <h3 class="aside-title" (click)="updateSummaries()">
      <span class="icon icon-ok-circled"></span>
      City profile
    </h3>
    <a routerLink="/city-profile" class="button button-small">Manage</a>
  </div>
  
  <!-- At least partially incomplete -->
  <h3 class="aside-title" 
      (click)="updateSummaries()" 
      *ngIf="!isDone(required) || !isDone(overall)">
      City profile
  </h3>
  
  <div class="aside-content in-progress" *ngIf="!isDone(overall)">
    <p>
      Enter information about your city, including any long-term goals you hope to achieve
    </p>

    <!-- Required in progress -->
    <div class="profile-progress-container required-progress" *ngIf="!isDone(required) && !isDone(overall)">
      <div class="progress-circle"
           [ldProgressbar]="required.complete"
           [ldProgressbarMax]="required.total"
           ldProgressbarLabelType="number">
      </div>
      <span class="progress-title">Required</span>
    </div>
    
    <!-- Required is complete -->
    <div class="profile-progress-container required-finished" *ngIf="isDone(required) && !isDone(overall)">
      <span class="icon icon-ok-circled"></span>
      <span class="progress-title">Required</span>
    </div>

    <div class="profile-progress-container overall-progress" *ngIf="!isDone(overall)">
      <span class="progress-number">{{ percentage(overall) }}%</span>
      <span class="progress-title">Overall</span>
    </div>
  </div>

  <footer class="aside-footer" *ngIf="!isDone(required) || !isDone(overall)">
    <a routerLink="/city-profile" class="button button-small">Manage</a>
  </footer>
</div>
